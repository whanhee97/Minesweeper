(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{18:function(e,t,a){},19:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var c=a(1),r=a.n(c),n=a(13),l=a.n(n),s=(a(18),a(19),a(7)),u=a(4),o=a(3),i=a(5),b=a(6),O=a(0),j=function(e){switch(e){case f.NORMAL:case f.MINE:return{background:"#444"};case f.CLICKED_MINE:return{background:"red"};case f.OPENED:return{background:"white"};case f.QUESTION_MINE:case f.QUESTION:return{background:"yellow"};case f.FLAG_MINE:case f.FLAG:return{background:"green"};default:return{background:"white"}}},E=function(e){switch(e){case f.NORMAL:case f.MINE:return"";case f.CLICKED_MINE:return Object(O.jsx)(i.a,{icon:b.a});case f.FLAG_MINE:case f.FLAG:return Object(O.jsx)(i.a,{icon:b.b});case f.QUESTION_MINE:case f.QUESTION:return Object(O.jsx)(i.a,{icon:b.c});default:return e||""}},d=Object(c.memo)((function(e){var t=e.rowIndex,a=e.cellIndex,r=Object(c.useContext)(v),n=r.tableData,l=r.dispatch,s=r.halted,u=Object(c.useCallback)((function(){if(console.log(s),!s)switch(n[t][a]){case f.OPENED:case f.FLAG_MINE:case f.FLAG:case f.QUESTION_MINE:case f.QUESTION:return;case f.NORMAL:return void l({type:D,row:t,cell:a});case f.MINE:return void l({type:L,row:t,cell:a});default:return}}),[n,a,t,l,s]),o=Object(c.useCallback)((function(e){if(e.preventDefault(),!s)switch(n[t][a]){case f.OPENED:return;case f.NORMAL:case f.MINE:return void l({type:x,row:t,cell:a});case f.FLAG_MINE:case f.FLAG:return void l({type:m,row:t,cell:a});case f.QUESTION_MINE:case f.QUESTION:return void l({type:C,row:t,cell:a});default:return}}),[n,a,t,l,s]);return Object(O.jsx)("td",{style:j(n[t][a]),onClick:u,onContextMenu:o,children:E(n[t][a])})})),I=Object(c.memo)((function(e){var t=e.rowIndex,a=Object(c.useContext)(v).tableData;return Object(O.jsx)("tr",{children:a[0]&&Array(a[0].length).fill().map((function(e,a){return Object(O.jsx)(d,{rowIndex:t,cellIndex:a})}))})})),h=Object(c.memo)((function(){var e=Object(c.useContext)(v).tableData;return Object(O.jsx)("table",{children:Array(e.length).fill().map((function(e,t){return Object(O.jsx)(I,{rowIndex:t})}))})})),N=Object(c.memo)((function(){var e=Object(c.useState)(10),t=Object(s.a)(e,2),a=t[0],r=t[1],n=Object(c.useState)(10),l=Object(s.a)(n,2),u=l[0],o=l[1],i=Object(c.useState)(20),b=Object(s.a)(i,2),j=b[0],E=b[1],d=Object(c.useContext)(v).dispatch,I=Object(c.useCallback)((function(e){r(e.target.value)}),[]),h=Object(c.useCallback)((function(e){o(e.target.value)}),[]),N=Object(c.useCallback)((function(e){E(e.target.value)}),[]),f=Object(c.useCallback)((function(){d({type:w,row:a,cell:u,mine:j})}),[d,a,u,j]);return Object(O.jsxs)("div",{class:"set-option",children:[Object(O.jsx)("input",{type:"number",placeholder:"\uc138\ub85c",value:a,onChange:I}),Object(O.jsx)("input",{type:"number",placeholder:"\uac00\ub85c",value:u,onChange:h}),Object(O.jsx)("input",{type:"number",placeholder:"\uc9c0\ub8b0",value:j,onChange:N}),Object(O.jsx)("button",{onClick:f,children:"\uc2dc\uc791"})]})})),f={MINE:-7,NORMAL:-1,QUESTION:-2,FLAG:-3,QUESTION_MINE:-4,FLAG_MINE:-5,CLICKED_MINE:-6,OPENED:0},v=Object(c.createContext)({tableData:[],dispatch:function(){},halted:!0}),M={tableData:[],timer:0,result:"",halted:!0,gameData:{row:0,cell:0,mine:0},isWin:!1},p=function(e,t,a){for(var c=[],r=[],n=0;n<a;){var l=Math.floor(Math.random()*(e*t));!1===r.includes(l)&&(r.push(l),n++)}for(var s=0;s<e;s++){var u=[];c.push(u);for(var o=0;o<t;o++)u.push(f.NORMAL)}for(var i=0;i<r.length;i++){var b=Math.floor(r[i]/t),O=r[i]%t;c[b][O]=f.MINE}return c},w="START_GAME",D="OPEN_CELL",L="CLICK_MINE",x="FLAG_CELL",m="QUESTION_CELL",C="NORMAL_CELL",g="INCREMENT_TIMER",A=function(e,t){switch(t.type){case w:return Object(o.a)(Object(o.a)({},e),{},{tableData:p(t.row,t.cell,t.mine),halted:!1,gameData:{row:t.row,cell:t.cell,mine:t.mine},timer:0,result:"",isWin:!1});case D:var a=Object(u.a)(e.tableData);a.forEach((function(e,t){a[t]=Object(u.a)(e)}));var c=[],r=0;!function e(t,r){if(!(t<0||t>=a.length||r<0||r>=a[0].length)&&![f.FLAG,f.FLAG_MINE,f.OPENED,f.QUESTION,f.QUESTION_MINE].includes(a[t][r])&&!c.includes(t+","+r)){c.push(t+","+r);var n=[];a[t-1]&&(n=n.concat([a[t-1][r-1],a[t-1][r],a[t-1][r+1]])),n=n.concat([a[t][r-1],a[t][r+1]]),a[t+1]&&(n=n.concat([a[t+1][r-1],a[t+1][r],a[t+1][r+1]]));var l=n.filter((function(e){return[f.FLAG_MINE,f.MINE,f.QUESTION_MINE].includes(e)})).length;if(0===l&&t>-1){var s=[];t-1>-1&&(s.push([t-1,r-1]),s.push([t-1,r]),s.push([t-1,r+1])),s.push([t,r-1]),s.push([t,r+1]),t+1<a.length&&(s.push([t+1,r-1]),s.push([t+1,r]),s.push([t+1,r+1])),s.forEach((function(t){a[t[0]][t[1]]!==f.OPENED&&e(t[0],t[1])}))}a[t][r]=l}}(t.row,t.cell),a.forEach((function(e,t){e.forEach((function(e,t){e>=0&&(r+=1)}))}));var n=!1,l="",s=!1;return r===e.gameData.row*e.gameData.cell-e.gameData.mine&&(n=!0,l=Object(O.jsxs)("div",{children:["You won in ",e.timer," seconds!!"]}),s=!0),Object(o.a)(Object(o.a)({},e),{},{tableData:a,halted:n,result:l,isWin:s});case L:var j=Object(u.a)(e.tableData);j[t.row]=Object(u.a)(e.tableData[t.row]),j[t.row][t.cell]=f.CLICKED_MINE;for(var E=0;E<e.gameData.row;E++)for(var d=0;d<e.gameData.cell;d++)j[E][d]!==f.MINE&&j[E][d]!==f.FLAG_MINE||(j[E][d]=f.CLICKED_MINE);var I=Object(O.jsxs)("div",{children:[Object(O.jsx)(i.a,{icon:b.d})," ",Object(O.jsx)("div",{children:"YOU DIE"})]});return Object(o.a)(Object(o.a)({},e),{},{tableData:j,result:I,halted:!0});case x:var h=Object(u.a)(e.tableData);return h[t.row]=Object(u.a)(e.tableData[t.row]),h[t.row][t.cell]=h[t.row][t.cell]===f.MINE?f.FLAG_MINE:f.FLAG,Object(o.a)(Object(o.a)({},e),{},{tableData:h});case m:var N=Object(u.a)(e.tableData);return N[t.row]=Object(u.a)(e.tableData[t.row]),N[t.row][t.cell]=N[t.row][t.cell]===f.FLAG_MINE?f.QUESTION_MINE:f.QUESTION,Object(o.a)(Object(o.a)({},e),{},{tableData:N});case C:var v=Object(u.a)(e.tableData);return v[t.row]=Object(u.a)(e.tableData[t.row]),v[t.row][t.cell]=v[t.row][t.cell]===f.QUESTION_MINE?f.MINE:f.NORMAL,Object(o.a)(Object(o.a)({},e),{},{tableData:v});case g:return Object(o.a)(Object(o.a)({},e),{},{timer:e.timer+1});default:return e}},_=function(){var e=Object(c.useReducer)(A,M),t=Object(s.a)(e,2),a=t[0],r=t[1],n=a.tableData,l=a.halted,u=a.timer,o=a.result,j=Object(c.useMemo)((function(){return{tableData:n,halted:l,dispatch:r}}),[n,l]);return Object(c.useEffect)((function(){var e;return l||(e=setInterval((function(){r({type:g})}),1e3)),function(){clearInterval(e)}}),[l]),Object(O.jsxs)(v.Provider,{value:j,children:[Object(O.jsx)(N,{}),Object(O.jsxs)("div",{class:"timer",children:[Object(O.jsx)(i.a,{icon:b.f})," ",u]}),Object(O.jsx)(h,{}),a.isWin?Object(O.jsxs)("div",{class:"result-win",children:[Object(O.jsx)(i.a,{icon:b.e})," ",o]}):Object(O.jsx)("div",{class:"result-fail",children:o})]})};var S=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(_,{})})},T=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,27)).then((function(t){var a=t.getCLS,c=t.getFID,r=t.getFCP,n=t.getLCP,l=t.getTTFB;a(e),c(e),r(e),n(e),l(e)}))};l.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(S,{})}),document.getElementById("root")),T()}},[[26,1,2]]]);
//# sourceMappingURL=main.533cd864.chunk.js.map